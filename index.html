<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق مواقيت الصلاة والطقس</title>
    <style>
        body {
            background-color: #ffccff;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        h1 {
            color: #ff66b2;
        }
        .button {
            background-color: #ff66b2;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 2px;
            cursor: pointer;
        }
        .button:hover {
            background-color: #ff3399;
        }
        .prayer-times {
            margin-top: 20px;
        }
        .weather-info {
            margin-top: 20px;
        }
        .input-container {
            margin: 20px;
        }
        .input-container input {
            padding: 10px;
            font-size: 16px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>تطبيق مواقيت الصلاة والطقس</h1>

    <div class="input-container">
        <input type="text" id="cityName" placeholder="أدخل اسم المدينة">
        <button class="button" onclick="getPrayerTimesAndWeather()">البحث</button>
    </div>

    <button class="button" onclick="changeColor()">تغيير اللون</button>

    <div class="prayer-times">
        <h2 id="cityNameHeader">مواقيت الصلاة</h2>
        <p>الفجر: <span id="fajr">--:--</span></p>
        <p>الظهر: <span id="dhuhr">--:--</span></p>
        <p>العصر: <span id="asr">--:--</span></p>
        <p>المغرب: <span id="maghrib">--:--</span></p>
        <p>العشاء: <span id="isha">--:--</span></p>
    </div>

    <div class="weather-info">
        <h2>حالة الطقس</h2>
        <p>الدرجة الحرارة: <span id="temperature">--</span> &deg;C</p>
        <p>الطقس: <span id="weatherDescription">--</span></p>
        <p>رطوبة الهواء: <span id="humidity">--</span>%</p>
        <p>سرعة الرياح: <span id="windSpeed">--</span> م/ث</p>
    </div>

    <script>
        const colors = [
            '#ffccff', '#ccffcc', '#ccffff', '#ffcccc', '#ccccff',
            '#ffffcc', '#ffebcc', '#e6ccff', '#ffcc99', '#ff99cc',
            '#99ccff', '#ff9966', '#ccff99'
        ];

        let currentColorIndex = 0;

        function changeColor() {
            currentColorIndex = (currentColorIndex + 1) % colors.length;
            document.body.style.backgroundColor = colors[currentColorIndex];
        }

        async function getPrayerTimesAndWeather() {
            const cityName = document.getElementById('cityName').value;
            if (!cityName) {
                alert('يرجى إدخال اسم المدينة');
                return;
            }

            // Get Prayer Times
            const prayerTimesUrl = `https://api.aladhan.com/v1/timingsByCity?city=${cityName}&country=&method=2`;
            const prayerTimesResponse = await fetch(prayerTimesUrl);
            const prayerTimesData = await prayerTimesResponse.json();
            if (prayerTimesData.code !== 200) {
                alert('حدث خطأ في جلب مواقيت الصلاة. يرجى المحاولة مرة أخرى.');
                return;
            }

            // Get Weather
            const weatherApiKey = '5af6a461e8c872eada5e97b1';
            const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${weatherApiKey}&units=metric`;
            const weatherResponse = await fetch(weatherUrl);
            const weatherData = await weatherResponse.json();
            if (weatherData.cod !== 200) {
                alert('حدث خطأ في جلب معلومات الطقس. يرجى المحاولة مرة أخرى.');
                return;
            }

            // Update Prayer Times
            document.getElementById("cityNameHeader").innerText = `مواقيت الصلاة في ${cityName}`;
            document.getElementById("fajr").innerText = prayerTimesData.data.timings.Fajr;
            document.getElementById("dhuhr").innerText = prayerTimesData.data.timings.Dhuhr;
            document.getElementById("asr").innerText = prayerTimesData.data.timings.Asr;
            document.getElementById("maghrib").innerText = prayerTimesData.data.timings.Maghrib;
            document.getElementById("isha").innerText = prayerTimesData.data.timings.Isha;

            // Update Weather
            document.getElementById("temperature").innerText = weatherData.main.temp;
            document.getElementById("weatherDescription").innerText = weatherData.weather[0].description;
            document.getElementById("humidity").innerText = weatherData.main.humidity;
            document.getElementById("windSpeed").innerText = weatherData.wind.speed;
        }
    </script>
</body>
</html>
